{% extends 'base.html' %}

{% block head %}{% endblock head %}

{% block body %}
<header class="yir-member-header -all-time">
    <div class="constraint">
        
        <h1 class="yir-member-title">A Life in&nbsp;Film</h1>    

        <h3 class="yir-member-subtitle">
            <span id="open-yir-menu">all-time&nbsp;stats</span>
            <div id="yir-menu" class="popmenu popup-menu yir-popup-menu -hide">
                <ul>
                    <li class="popup-menu-text"><a href="" class="styled-number">All time</a></li>
                    {% for year in [2022, 2021] %}
                    
                    <li class="popup-menu-text">
                        <a href="/{{year}}" class="styled-number">
                            {{year}}
                        </a>   
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </h3>

        <svg class="pattern -right" role="presentation" width="320" height="390" viewBox="0 0 320 390" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g transform="translate(318 63)"><rect fill="#00E054" y="67" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="58" rx="2"></rect><rect fill="#FF8000" y="172" width="4" height="62" rx="2"></rect></g><g transform="translate(298 88)"><rect fill="#00E054" y="59" width="4" height="70" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="162" width="4" height="42" rx="2"></rect></g><g transform="translate(278 78)"><rect fill="#00E054" y="86" width="4" height="50" rx="2"></rect><rect fill="#40BCF4" width="4" height="70" rx="2"></rect><rect fill="#FF8000" y="174" width="4" height="60" rx="2"></rect></g><g transform="translate(258 94)"><rect fill="#00E054" y="70" width="4" height="99" rx="2"></rect><rect fill="#40BCF4" width="4" height="48" rx="2"></rect><rect fill="#FF8000" y="196" width="4" height="30" rx="2"></rect></g><g transform="translate(238 83)"><rect fill="#00E054" y="104" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="58" rx="2"></rect><rect fill="#FF8000" y="192" width="4" height="32" rx="2"></rect></g><g transform="translate(218 108)"><rect fill="#00E054" y="79" width="4" height="40" rx="2"></rect><rect fill="#40BCF4" width="4" height="48" rx="2"></rect><rect fill="#FF8000" y="152" width="4" height="62" rx="2"></rect><rect fill="#FF8000" y="222" width="4" height="4" rx="2"></rect></g><g transform="translate(198 78)"><rect fill="#00E054" y="112" width="4" height="60" rx="2"></rect><rect fill="#40BCF4" width="4" height="80" rx="2"></rect><rect fill="#FF8000" y="184" width="4" height="30" rx="2"></rect><rect fill="#FF8000" y="222" width="4" height="10" rx="2"></rect></g><g transform="translate(178 64)"><rect fill="#00E054" y="100" width="4" height="119" rx="2"></rect><rect fill="#40BCF4" width="4" height="68" rx="2"></rect><rect fill="#FF8000" y="226" width="4" height="10" rx="2"></rect></g><g transform="translate(158 91)"><rect fill="#00E054" y="88" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="184" width="4" height="32" rx="2"></rect></g><g opacity=".8" transform="translate(138 100)"><rect fill="#00E054" y="63" width="4" height="50" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="138" width="4" height="82" rx="2"></rect></g><g transform="translate(118 100)"><rect fill="#00E054" y="66" width="4" height="50" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="172" width="4" height="32" rx="2"></rect></g><g transform="translate(98 110)"><rect fill="#00E054" y="66" width="4" height="30" rx="2"></rect><rect fill="#40BCF4" width="4" height="38" rx="2"></rect><rect fill="#FF8000" y="131" width="4" height="42" rx="2"></rect><rect fill="#FF8000" y="182" width="4" height="12" rx="2"></rect></g><g transform="translate(78 107)"><rect fill="#00E054" y="46" width="4" height="60" rx="2"></rect><rect fill="#40BCF4" width="4" height="10" rx="2"></rect><rect fill="#FF8000" y="149" width="4" height="32" rx="2"></rect></g><g transform="translate(58 76)"><rect fill="#00E054" y="63" width="4" height="60" rx="2"></rect><rect fill="#40BCF4" y="18" width="4" height="28" rx="2"></rect><rect fill="#40BCF4" width="4" height="10" rx="2"></rect><rect fill="#FF8000" y="185" width="4" height="36" rx="2"></rect></g><g transform="translate(38 39)"><rect fill="#00E054" y="83" width="4" height="74" rx="2"></rect><rect fill="#40BCF4" width="4" height="77" rx="2"></rect><rect fill="#FF8000" y="214" width="4" height="22" rx="2"></rect></g><g transform="translate(18 81)"><rect fill="#00E054" y="56" width="4" height="70" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="172" width="4" height="42" rx="2"></rect></g><g transform="translate(-2 101)"><rect fill="#00E054" y="36" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="10" rx="2"></rect><rect fill="#FF8000" y="124" width="4" height="72" rx="2"></rect></g></g></svg>
        <svg class="pattern -left" role="presentation" width="320" height="390" viewBox="0 0 320 390" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g transform="translate(318 70)"><rect fill="#00E054" y="86" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="77" rx="2"></rect><rect fill="#FF8000" y="202" width="4" height="32" rx="2"></rect><rect fill="#FF8000" y="238" width="4" height="4" rx="2"></rect></g><g transform="translate(298 121)"><rect fill="#00E054" y="55" width="4" height="90" rx="2"></rect><rect fill="#40BCF4" width="4" height="48" rx="2"></rect><rect fill="#FF8000" y="169" width="4" height="22" rx="2"></rect></g><g transform="translate(278 111)"><rect fill="#00E054" y="66" width="4" height="70" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="152" width="4" height="52" rx="2"></rect></g><g transform="translate(258 84)"><rect fill="#00E054" y="78" width="4" height="90" rx="2"></rect><rect fill="#FF8000" y="201" width="4" height="52" rx="2"></rect><rect fill="#40BCF4" width="4" height="60" rx="2"></rect></g><g transform="translate(238 80)"><rect fill="#00E054" y="96" width="4" height="90" rx="2"></rect><rect fill="#00E054" y="68" width="4" height="20" rx="2"></rect><rect fill="#40BCF4" width="4" height="47" rx="2"></rect><rect fill="#FF8000" y="212" width="4" height="32" rx="2"></rect></g><g transform="translate(218 96)"><rect fill="#00E054" y="48" width="4" height="70" rx="2"></rect><rect fill="#40BCF4" y="12" width="4" height="18" rx="2"></rect><rect fill="#40BCF4" width="4" height="4" rx="2"></rect><rect fill="#FF8000" y="144" width="4" height="22" rx="2"></rect></g><g transform="translate(198 111)"><rect fill="#00E054" y="46" width="4" height="60" rx="2"></rect><rect fill="#00E054" y="114" width="4" height="4" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="142" width="4" height="42" rx="2"></rect></g><g transform="translate(178 40)"><rect fill="#00E054" y="102" width="4" height="100" rx="2"></rect><rect fill="#FF8000" y="210" width="4" height="12" rx="2"></rect><rect fill="#40BCF4" width="4" height="70" rx="2"></rect></g><g transform="translate(158 86)"><rect fill="#00E054" y="36" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="132" width="4" height="32" rx="2"></rect></g><g transform="translate(138 86)"><rect fill="#00E054" y="36" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="132" width="4" height="32" rx="2"></rect></g><g transform="translate(118 111)"><rect fill="#00E054" y="36" width="4" height="80" rx="2"></rect><rect fill="#40BCF4" width="4" height="28" rx="2"></rect><rect fill="#FF8000" y="132" width="4" height="32" rx="2"></rect></g><g transform="translate(98 82)"><rect fill="#00E054" y="102" width="4" height="100" rx="2"></rect><rect fill="#FF8000" y="210" width="4" height="12" rx="2"></rect><rect fill="#40BCF4" width="4" height="70" rx="2"></rect></g><g transform="translate(78 74)"><rect fill="#00E054" y="51" width="4" height="170" rx="2"></rect><rect fill="#40BCF4" width="4" height="4" rx="2"></rect><rect fill="#40BCF4" y="23" width="4" height="20" rx="2"></rect><rect fill="#FF8000" y="246" width="4" height="34" rx="2"></rect></g><g transform="translate(58 127)"><rect fill="#00E054" y="64" width="4" height="40" rx="2"></rect><rect fill="#FF8000" y="144" width="4" height="74" rx="2"></rect><rect fill="#40BCF4" width="4" height="20" rx="2"></rect></g><g transform="translate(38 77)"><rect fill="#00E054" y="104" width="4" height="90" rx="2"></rect><rect fill="#FF8000" y="204" width="4" height="64" rx="2"></rect><rect fill="#40BCF4" width="4" height="24" rx="2"></rect><rect fill="#40BCF4" y="32" width="4" height="50" rx="2"></rect></g><g transform="translate(18 117)"><rect fill="#00E054" y="84" width="4" height="70" rx="2"></rect><rect fill="#FF8000" y="184" width="4" height="44" rx="2"></rect><rect fill="#FF8000" y="232" width="4" height="4" rx="2"></rect><rect fill="#40BCF4" width="4" height="30" rx="2"></rect></g><g transform="translate(-2 127)"><rect fill="#00E054" y="42" width="4" height="76" rx="2"></rect><rect fill="#FF8000" y="194" width="4" height="44" rx="2"></rect><rect fill="#40BCF4" width="4" height="10" rx="2"></rect></g></g></svg>
    
    </div>

    <div class="yir-member-stats">
        <h4 class="yir-member-statistic statistic">
            <span class="value">{{ lifetime_stats.tot_films }}</span>
            <span class="definition">Films</span>
        </h4>

        <h4 class="yir-member-statistic statistic">
            <span class="value">{{ lifetime_stats.tot_time }}</span>
            <span class="definition">Hours</span>
        </h4>

        <h4 class="yir-member-statistic statistic">
            <span class="value">{{ lifetime_stats.tot_directors }}</span>
            <span class="definition">Directors</span>
        </h4>

        <h4 class="yir-member-statistic statistic">
            <span class="value">{{ lifetime_stats.tot_countries }}</span>
            <span class="definition">Countries</span>
        </h4>
    </div>

</header>


<!-- FILMS BY RELEASING YEAR GRAPHS -->
<section class="yir-block yir-films-by-year text js-yir-tabs">
    <header>
        <a name="films"></a>
        <h3 class="yir-title-3">By release year</h3>
        <nav class="js-films-by-year-nav">
            <a class="js-yir-internal-nav-link -active" id="btn-release-year-films">Films</a>
            <a class="js-yir-internal-nav-link" id="btn-release-year-ratings">Ratings</a>
        </nav>
    </header>
    
    <div class="yir-by-year-wrapper"> 
        
        <section id="release-year-films" class="js-yir-tab-section yir-by-year yir-films-by-release-year -show">
            <div class="chart js-films-by-release-year-chart">
                <div class="target">
                    <div class="highcharts-container" id='films-by-release-year-chart'></div>
                </div>
                <div class="xaxis js-xaxis" style="width: 847px;">
                    <span class="yir-label –left">{{films_by_year_chart.miny|safe}}</span>
                    <span class="yir-label -right">{{films_by_year_chart.maxy|safe}}</span>
                </div>
            </div>
        </section>
        
        <script>
                
            var bins = {{ films_by_year_chart.bins|safe }}
            var count = {{ films_by_year_chart.count|safe }}
            var ratings = {{ films_by_year_chart.ratings|safe }}

        </script>

        
        <section id="release-year-ratings" class="js-yir-tab-section yir-by-year yir-average-rating-by-release-year -hide">
            <div class="chart js-average-rating-by-release-year-chart">
                <div class="target">
                    <div class="highcharts-container" id='average-rating-by-release-year-chart'></div>
                </div>
                <div class="xaxis js-xaxis" style="width: 847px;">
                    <span class="yir-label –left">{{films_by_year_chart.miny|safe}}</span>
                    <span class="yir-label -right">{{films_by_year_chart.maxy|safe}}</span>
                </div>
            </div>
        </section>
    </div>
</section>

<!-- GENRES, COUNTRIES, LANGS BREAKDOWN -->
<section class="yir-block yir-breakdown-charts">
    <header>
        <a name="genres"></a>
        <h3 class="yir-title-3">Genres, countries &amp; languages</h3>
    </header>
    
    <div class="all-breakdown-charts"> 
        <script>

            var genre = [{{breakdown_charts.genre_keys | safe}}, {{breakdown_charts.genre_vals|safe}}]
            var country = [{{breakdown_charts.country_keys | safe}}, {{breakdown_charts.country_vals|safe}}]
            var language = [{{breakdown_charts.language_keys | safe}}, {{breakdown_charts.language_vals}}]
            
        </script>

        <section class="yir-genres">
            <div id="films-by-genre" class="yir-film-breakdown-graph">
                
            </div>
        </section>
        
        <section class="yir-countries">
            <div id="films-by-country" class="yir-film-breakdown-graph">
                
            </div>
        </section>
        
        <section class="yir-languages">
            <div id="films-by-language" class="yir-film-breakdown-graph">
                
            </div>
        </section>
    </div> 
    
 
</section>

<!-- MOST WATCHED FILMS -->
<section class="yir-block text posters-110 no-poster-show-titles -compact">
    <header>
        <a name="most-watched"></a>
        <h3 class="yir-title-3">Most watched</h3>
    </header>
    <div class="yir-most-rewatched">
    
        {% for film in films_most_watched %}
        {% set uri = film['name'].replace(' ', '-').replace('.', '').lower() %}
    
        <div class="yir-poster-grid">
            <div class="poster-container">
                <div class="poster film-poster">
                    <div>
                        <img src="{{ film['poster'] }}" width="110" height="165" alt="{{ film['name'] }}" class="image">
                        <a href="https://letterboxd.com/{{USERNAME}}/film/{{ uri }}/activity/" class="frame has-menu"></a>
                    </div>
                </div>
            </div>
            <p class="yir-label -detail">&nbsp;{{ film['times']|safe }}&nbsp;times</p>
        </div>
    
        {% endfor %}

    </div>
    <div class="yir-truncation-button"> 
        <a class="yir-button -large" target="_blank" href="https://letterboxd.com/{{USERNAME}}/films/diary/by/diary-count/">See all</a>
    </div>
</section>

<!-- FAV ACTORS -->
<section class="yir-block yir-faves js-yir-tabs">
    <header>
        <a name="stars"></a>
        <h3 class="yir-title-3">Stars</h3>
        <nav>
            <a class="navlink js-yir-internal-nav-link -active" id="btn-most-watched-actors">Most watched</a>		
            <a class="js-yir-internal-nav-link" id="btn-highest-rated-actors">Highest Rated</a>
        </nav>
    </header>

    
    
    <section id="actors-most-watched" class="js-yir-tab-section yir-fave-person yir-person-list-multi -show">
        
        <ul class="avatar-list">
            
            {% for actor, n_films in actors_most_watched.items() %}
                {% set url = actor.replace(' ', '-').replace('.', '').lower() %}

                <li>
                    <a href="https://letterboxd.com/{{USERNAME}}/films/with/actor/{{ url }}/" class="avatar -irregular -a150 image-loaded">
                        <img src="{{ url_for('static', filename='img/person2.png') }}" class="js-tmdb-person crop-square">
                    </a>
                    <div class="yir-person-list-data">
                        <p class="yir-secondary-heading"><a class="-allow-widow" href="https://letterboxd.com/{{USERNAME}}/films/with/actor/{{ url }}/">{{ actor }}</a></p>
                        <p class="yir-label –center -detail"><a href="https://letterboxd.com/{{USERNAME}}/films/with/actor/{{ url }}/">{{ n_films }}&nbsp;films</a></p>
                    </div>
                </li>
            
            {% endfor %}        
                
               
        </ul>
        
    </section>
    
    <section id="actors-by-rating" class="js-yir-tab-section yir-fave-person yir-person-list-multi -hide">
        
        <ul class="avatar-list">
                
        {% for actor in actors_by_rating %}
            {% set url = actor[0].replace(' ', '-').replace('.', '').lower() %}
                <li>
                    
                    <a href="https://letterboxd.com/{{USERNAME}}/films/ratings/with/actor/{{url}}/by/entry-rating/" class="avatar -a150 -irregular image-loaded">
                        <img src="{{ url_for('static', filename='img/person2.png') }}" class="js-tmdb-person crop-square">
                    </a>
                    <div class="yir-person-list-data">
                        <p class="yir-secondary-heading"><a class="-allow-widow" href="https://letterboxd.com/{{USERNAME}}/films/ratings/with/actor/{{url}}/by/entry-rating/">{{actor[0]}}</a></p>
                        <p class="yir-label –center -detail">★ {{actor[1]}}</p>
                    </div>
                </li>
        {% endfor %}   
                
            
            </ul>
        
    </section>


                
    
</section>

<!-- FAV DIRECTORS -->
<section class="yir-block yir-faves js-yir-tabs">
    <header>
        <a name="directors"></a>
        <h3 class="yir-title-3">Directors</h3>
        <nav>
            
            <a class="js-yir-internal-nav-link -active" id="btn-directors-most-watched">Most watched</a>
                
            <a class="js-yir-internal-nav-link" id="btn-directors-by-rating">Highest Rated</a>
        </nav>
    </header>
    
        <section id="directors-most-watched" class="js-yir-tab-section yir-fave-person yir-person-list-multi -show">
            
            <ul class="avatar-list">
                
                    {% for director, n_films in directors_most_watched.items() %}
                    {% set url = director.replace(' ', '-').replace('.', '').lower() %}

                    <li>
                        
                        <a href="https://letterboxd.com/{{USERNAME}}/films/with/director/{{url}}/" class="avatar -a150 -irregular image-loaded" data-original-title=""><img src="{{ url_for('static', filename='img/person.png') }}" class="js-tmdb-person crop-square"></a>
                        <div class="yir-person-list-data">
                            <p class="yir-secondary-heading"><a class="-allow-widow" href="https://letterboxd.com/{{USERNAME}}/films/with/director/{{url}}/">{{director}}</a></p>
                            <p class="yir-label –center -detail"><a href="https://letterboxd.com/{{USERNAME}}/films/with/director/{{url}}/">{{n_films}}&nbsp;films</a></p>
                        </div>
                    </li>

                    {% endfor %}
                     
            </ul>
            
        </section>
        
        
            
            <section id="directors-by-rating" class="js-yir-tab-section yir-fave-person yir-person-list-multi -hide">
                
                <ul class="avatar-list">
                    
                    {% for director in directors_by_rating %}
                    {% set url = director[0].replace(' ', '-').replace('.', '').lower() %}
                        
                        <li>
                            
                            <a href="https://letterboxd.com/{{USERNAME}}/films/ratings/with/director/{{url}}/by/entry-rating/" class="avatar -a150 -irregular image-loaded" data-original-title=""><img src="{{ url_for('static', filename='img/person.png') }}" class="js-tmdb-person crop-square"></a>
                            <div class="yir-person-list-data">
                                <p class="yir-secondary-heading"><a href="https://letterboxd.com/{{USERNAME}}/films/ratings/with/director/{{url}}/by/entry-rating/">{{director[0]}}</a></p>
                                <p class="yir-label –center -detail">★ {{director[1]}}</p>
                            </div>
                        </li>
                    
                    {% endfor %}
                       
                </ul>
            
                
            </section>
            
        
    
</section> 


{#
<section class="yir-block yir-world-map -alltime">
    <header>
        <a name="map"></a>
        <h3 class="yir-title-3">World map</h3>
    </header>
    <div id="film-world-map" class="stats-map -has-frame">
    </div>
</section>#}


{% endblock body %}